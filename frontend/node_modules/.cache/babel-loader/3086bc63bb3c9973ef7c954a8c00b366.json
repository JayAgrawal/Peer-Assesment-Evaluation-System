{"ast":null,"code":"var _jsxFileName = \"/Users/jayagrawal/Documents/GitHub/Delivery4/frontend/src/Containers/PeerAssesmentsStudent.js\";\nimport React, { Component } from 'react';\nimport Moment from 'moment'; // HomePage\n\nimport Assesments from '../Components/DashboardStudent/Assesments';\nimport ToDOModal from '../Components/DashboardStudent/SubmitModal'; // Nav\n\nimport Nav from '../Components/NavBar'; // redirect\n\nimport { Redirect } from 'react-router-dom';\nconst assesmentsToDo = [\n  /*{\n      name:'Delivery 6 Assesments',\n      teamMates:['Pedro', 'John', 'Adam'],\n      dueDate: new Date(),\n      id:12312\n  }*/\n];\nconst assesmentsClosed = [\n  /*{\n      name:'Delivery 5 Assesments',\n      teamMates:['Pedro', 'John', 'Adam'],\n      dueDate: Moment(new Date()).subtract(10, 'days').calendar(),\n      id:12312\n  }*/\n];\n\nclass StudentHome extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      openToDoModal: false,\n      todoSelected: null,\n      todoResponses: null,\n      logout: false,\n      evaluations: [],\n      team: [],\n      teamDup: []\n    };\n\n    this.openModalHandler = e => {\n      console.log(assesmentsToDo[e]);\n      this.setState({\n        openToDoModal: true,\n        todoSelected: assesmentsToDo[e]\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        openToDoModal: false\n      });\n    };\n\n    this.submitEval = () => {\n      fetch(\"http://127.0.0.1:8000/api/Evaluation/\", {\n        method: \"post\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          evaluation_name: this.state.todoSelected.evaluation_name,\n          rating: 2,\n          comment: 'Testing',\n          dueDate: this.state.todoSelected.dueDate,\n          completed: true,\n          student: this.state.todoSelected.student,\n          teamMembers: this.state.todoSelected.teamMembers.slice(-1)[0]\n        })\n      });\n    };\n\n    this.onLogout = () => {\n      console.log('here');\n      this.setState({\n        logout: true\n      });\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const resEval = await fetch('http://127.0.0.1:8000/api/Evaluation');\n      const evaluations = await resEval.json();\n      this.setState({\n        evaluations\n      });\n      const resTeam = await fetch('http://127.0.0.1:8000/api/Team');\n      const team = await resTeam.json();\n      this.setState({\n        team\n      });\n      const resTeamDup = await fetch('http://127.0.0.1:8000/api/Team');\n      const teamDup = await resTeamDup.json();\n      this.setState({\n        teamDup\n      });\n\n      for (let i = 0; i < Object.keys(this.state.evaluations).length; i++) {\n        for (let j = 0; j < Object.keys(this.state.team).length; j++) {\n          if (this.state.evaluations[i].teamMembers == this.state.team[j].id) {\n            this.state.evaluations[i].teamMembers = [this.state.team[j].member1, this.state.team[j].member2, this.state.team[j].member3, this.state.team[j].member4, this.state.team[j].id];\n          }\n        }\n\n        if (this.state.evaluations[i].completed == false) {\n          var today = new Date();\n          var todayDate = today.getFullYear() + '-0' + (today.getMonth() + 1) + '-0' + today.getDate(); //MUST REMOVE 0's AFTER MAY 10th\n\n          if (this.state.evaluations[i].dueDate >= todayDate) {\n            if (assesmentsToDo.some(temp => temp.id === this.state.evaluations[i].id)) {} else {\n              assesmentsToDo.push(this.state.evaluations[i]);\n            }\n          } else {\n            if (assesmentsClosed.some(temp => temp.id === this.state.evaluations[i].id)) {} else {\n              assesmentsClosed.push(this.state.evaluations[i]);\n            }\n          }\n        }\n      }\n\n      assesmentsToDo.sort((a, b) => a.dueDate > b.dueDate ? 1 : -1);\n      assesmentsClosed.sort((a, b) => a.dueDate > b.dueDate ? 1 : -1);\n    } catch (e) {\n      console.log(e);\n    }\n  } // *----------HANDLE MODAL METHODS------------------*\n\n\n  render() {\n    return React.createElement(Nav, {\n      user: \"Student\",\n      onLogout: this.onLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Assesments, {\n      toDoArr: assesmentsToDo,\n      closedArr: assesmentsClosed,\n      openModal: this.openModalHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(ToDOModal, {\n      close: this.handleClose,\n      open: this.state.openToDoModal,\n      info: this.state.todoSelected,\n      submit: this.submitEval,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), this.state.logout === true ? React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nexport default StudentHome;","map":{"version":3,"sources":["/Users/jayagrawal/Documents/GitHub/Delivery4/frontend/src/Containers/PeerAssesmentsStudent.js"],"names":["React","Component","Moment","Assesments","ToDOModal","Nav","Redirect","assesmentsToDo","assesmentsClosed","StudentHome","state","openToDoModal","todoSelected","todoResponses","logout","evaluations","team","teamDup","openModalHandler","e","console","log","setState","handleClose","submitEval","fetch","method","headers","body","JSON","stringify","evaluation_name","rating","comment","dueDate","completed","student","teamMembers","slice","onLogout","componentDidMount","resEval","json","resTeam","resTeamDup","i","Object","keys","length","j","id","member1","member2","member3","member4","today","Date","todayDate","getFullYear","getMonth","getDate","some","temp","push","sort","a","b","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport Moment from 'moment'\n\n// HomePage\nimport Assesments from '../Components/DashboardStudent/Assesments'\nimport ToDOModal from '../Components/DashboardStudent/SubmitModal'\n\n\n// Nav\nimport Nav from '../Components/NavBar'\n\n// redirect\nimport {Redirect} from 'react-router-dom'\n\n\nconst assesmentsToDo=[\n    /*{\n        name:'Delivery 6 Assesments',\n        teamMates:['Pedro', 'John', 'Adam'],\n        dueDate: new Date(),\n        id:12312\n    }*/\n]\n\nconst assesmentsClosed=[\n    /*{\n        name:'Delivery 5 Assesments',\n        teamMates:['Pedro', 'John', 'Adam'],\n        dueDate: Moment(new Date()).subtract(10, 'days').calendar(),\n        id:12312\n    }*/\n]\n\n\n\nclass StudentHome extends Component{\n\n    state={\n        openToDoModal:false,\n        todoSelected:null,\n        todoResponses:null,\n        logout:false,\n\n        evaluations:[],\n        team:[],\n        teamDup:[]\n    }\n\n    async componentDidMount() {\n        try {\n            const resEval = await fetch('http://127.0.0.1:8000/api/Evaluation');\n            const evaluations = await resEval.json();\n            this.setState({evaluations});\n\n            const resTeam = await fetch('http://127.0.0.1:8000/api/Team');\n            const team = await resTeam.json();\n            this.setState({team}); \n    \n            const resTeamDup = await fetch('http://127.0.0.1:8000/api/Team');\n            const teamDup = await resTeamDup.json();\n            this.setState({teamDup}); \n\n            for (let i = 0; i < Object.keys(this.state.evaluations).length; i++){\n                for (let j = 0; j < Object.keys(this.state.team).length; j++){\n                    if(this.state.evaluations[i].teamMembers == this.state.team[j].id){\n                        this.state.evaluations[i].teamMembers = [this.state.team[j].member1, this.state.team[j].member2, \n                        this.state.team[j].member3, this.state.team[j].member4, this.state.team[j].id];\n                    } \n                }\n                \n\n                if (this.state.evaluations[i].completed == false){\n                    var today = new Date();\n                    var todayDate = today.getFullYear()+'-0'+(today.getMonth()+1)+'-0'+today.getDate(); //MUST REMOVE 0's AFTER MAY 10th\n\n                    if (this.state.evaluations[i].dueDate >= todayDate){\n                        if(assesmentsToDo.some(temp => temp.id === this.state.evaluations[i].id)){}  \n                        else{assesmentsToDo.push(this.state.evaluations[i]);}\n                    }\n                    else{\n                        if(assesmentsClosed.some(temp => temp.id === this.state.evaluations[i].id)){} \n                        else{assesmentsClosed.push(this.state.evaluations[i]);} \n                    }\n                }\n            }\n\n            assesmentsToDo.sort((a, b) => (a.dueDate > b.dueDate) ? 1 : -1);\n            assesmentsClosed.sort((a, b) => (a.dueDate > b.dueDate) ? 1 : -1);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n\n    // *----------HANDLE MODAL METHODS------------------*\n     openModalHandler = (e) => {\n         console.log(assesmentsToDo[e])\n        this.setState({\n            openToDoModal:true,\n            todoSelected:assesmentsToDo[e]\n\n        });\n      };\n    \n    handleClose = () => {\n        this.setState({\n            openToDoModal:false\n        })\n      };\n    \n    submitEval = () => {\n        fetch(\"http://127.0.0.1:8000/api/Evaluation/\", {\n            method: \"post\",\n            headers: {\n                'Accept':'application/json',\n                'Content-Type': 'application/json'\n            },\n\n            body: JSON.stringify({\n                evaluation_name : this.state.todoSelected.evaluation_name,\n                rating : 2,\n                comment : 'Testing',\n                dueDate : this.state.todoSelected.dueDate,\n                completed : true,\n                student : this.state.todoSelected.student,\n                teamMembers : this.state.todoSelected.teamMembers.slice(-1)[0],\n            })\n        })\n        }\n\n\n    // LOGOUT\n      onLogout=()=>{\n        console.log('here')\n        this.setState({\n            logout:true\n        })\n    }\n\n\n\n    render(){\n      \n        return(\n            <Nav\n                user=\"Student\"\n                onLogout={this.onLogout}\n\n            >\n                <Assesments\n                toDoArr={assesmentsToDo}\n                closedArr={assesmentsClosed}\n                openModal={this.openModalHandler}\n                />\n\n            <ToDOModal \n                close={this.handleClose}\n                open={this.state.openToDoModal}\n                info={this.state.todoSelected}\n                submit={this.submitEval}\n            />\n\n            {this.state.logout===true?<Redirect to='/login' />:null}\n\n            </Nav>\n        )\n    }\n}\n\nexport default StudentHome"]},"metadata":{},"sourceType":"module"}